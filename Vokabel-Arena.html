<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vokabel-Arena | Champion</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #2d3748;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.8em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.3em;
            opacity: 0.95;
        }

        .rank-display {
            position: absolute;
            top: 20px;
            right: 30px;
            background: rgba(255,255,255,0.2);
            padding: 15px 25px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .rank-title {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .rank-name {
            font-size: 1.5em;
            font-weight: bold;
        }

        .stats-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            background: #f7fafc;
            padding: 25px;
            border-bottom: 3px solid #e2e8f0;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 2px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }

        .stat-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 0.9em;
            color: #718096;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #48bb78, #38a169);
            transition: width 0.5s ease;
        }

        .main-content {
            display: flex;
            min-height: 600px;
        }

        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, #f7fafc 0%, #edf2f7 100%);
            padding: 25px;
            border-right: 2px solid #e2e8f0;
            overflow-y: auto;
        }

        .content-area {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            max-height: 70vh;
        }

        .game-mode-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            cursor: pointer;
            border: 3px solid #e2e8f0;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .game-mode-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .game-mode-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
            border-color: #667eea;
        }

        .game-mode-card:hover::before {
            transform: scaleX(1);
        }

        .mode-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .mode-title {
            font-size: 1.4em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .mode-description {
            color: #718096;
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .mode-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e2e8f0;
        }

        .mode-stat {
            text-align: center;
        }

        .mode-stat-value {
            font-weight: bold;
            color: #667eea;
            font-size: 1.1em;
        }

        .mode-stat-label {
            font-size: 0.85em;
            color: #718096;
        }

        .difficulty-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
            margin-top: 10px;
        }

        .difficulty-easy { background: #c6f6d5; color: #22543d; }
        .difficulty-medium { background: #feebc8; color: #7c2d12; }
        .difficulty-hard { background: #fed7d7; color: #742a2a; }
        .difficulty-expert { background: #e9d8fd; color: #44337a; }

        .quiz-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e2e8f0;
        }

        .quiz-progress {
            font-size: 1.1em;
            color: #667eea;
            font-weight: bold;
        }

        .quiz-timer {
            font-size: 1.5em;
            color: #e53e3e;
            font-weight: bold;
        }

        .quiz-score {
            font-size: 1.1em;
            color: #48bb78;
            font-weight: bold;
        }

        .question-card {
            background: linear-gradient(135deg, #f7fafc, #edf2f7);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .question-text {
            font-size: 1.6em;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .question-hint {
            font-size: 1em;
            color: #718096;
            font-style: italic;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 30px;
        }

        .option-card {
            background: white;
            border: 3px solid #e2e8f0;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            position: relative;
        }

        .option-card:hover:not(.disabled) {
            transform: scale(1.05);
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .option-card.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea15, #764ba215);
        }

        .option-card.correct {
            border-color: #48bb78;
            background: linear-gradient(135deg, #48bb7820, #38a16920);
            animation: celebrate 0.6s ease;
        }

        .option-card.incorrect {
            border-color: #f56565;
            background: linear-gradient(135deg, #f5656520, #e5353520);
            animation: shake 0.5s ease;
        }

        .option-card.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        @keyframes celebrate {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.1) rotate(5deg); }
            75% { transform: scale(1.1) rotate(-5deg); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .option-text {
            font-size: 1.2em;
            font-weight: 600;
            color: #2d3748;
        }

        .option-translation {
            font-size: 0.9em;
            color: #718096;
            margin-top: 5px;
        }

        .feedback-panel {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-top: 25px;
            border-left: 5px solid;
        }

        .feedback-panel.correct {
            border-color: #48bb78;
            background: linear-gradient(90deg, #48bb7810, transparent);
        }

        .feedback-panel.incorrect {
            border-color: #f56565;
            background: linear-gradient(90deg, #f5656510, transparent);
        }

        .feedback-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .feedback-explanation {
            font-size: 1em;
            color: #4a5568;
            line-height: 1.6;
        }

        .button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 30px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px 5px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .button:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(102, 126, 234, 0.5);
        }

        .button:active {
            transform: translateY(-1px);
        }

        .button.secondary {
            background: linear-gradient(135deg, #718096, #4a5568);
        }

        .button.success {
            background: linear-gradient(135deg, #48bb78, #38a169);
        }

        .button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .results-screen {
            text-align: center;
            padding: 40px;
        }

        .results-icon {
            font-size: 8em;
            margin-bottom: 20px;
            animation: bounce 1s ease infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .results-title {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
        }

        .results-score {
            font-size: 3em;
            font-weight: bold;
            margin: 20px 0;
        }

        .results-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .result-stat-card {
            background: #f7fafc;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #e2e8f0;
        }

        .result-stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }

        .result-stat-label {
            font-size: 0.9em;
            color: #718096;
            margin-top: 5px;
        }

        .achievement-earned {
            background: linear-gradient(135deg, #ffd700, #ffa500);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4);
        }

        .achievement-earned h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .tips-panel {
            background: linear-gradient(135deg, #edf2f7, #e2e8f0);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border-left: 5px solid #667eea;
        }

        .tips-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tip-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .tip-item strong {
            color: #667eea;
        }

        .word-card-interactive {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            border: 2px solid #e2e8f0;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .word-card-interactive:hover {
            transform: translateX(5px);
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .word-card-interactive.selected {
            border-color: #48bb78;
            background: linear-gradient(135deg, #48bb7815, #38a16915);
        }

        .word-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .word-german {
            font-size: 1.4em;
            font-weight: bold;
            color: #2d3748;
        }

        .word-level {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
        }

        .level-1 { background: #90cdf4; color: #2c5282; }
        .level-2 { background: #9ae6b4; color: #22543d; }
        .level-3 { background: #fbd38d; color: #7c2d12; }
        .level-4 { background: #fbb6ce; color: #702459; }
        .level-5 { background: #d6bcfa; color: #44337a; }

        .word-english {
            color: #718096;
            font-size: 1em;
            margin-bottom: 10px;
        }

        .word-example {
            font-style: italic;
            color: #4a5568;
            font-size: 0.95em;
        }

        .vocab-builder {
            margin-top: 20px;
        }

        .selected-words-panel {
            background: linear-gradient(135deg, #f7fafc, #edf2f7);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            min-height: 100px;
        }

        .selected-words-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
        }

        .selected-word-chip {
            display: inline-block;
            background: white;
            padding: 8px 15px;
            border-radius: 20px;
            margin: 5px;
            border: 2px solid #48bb78;
            font-weight: 600;
        }

        .rank-ladder {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .rank-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            background: #f7fafc;
            border-left: 4px solid #e2e8f0;
        }

        .rank-item.current {
            background: linear-gradient(135deg, #667eea15, #764ba215);
            border-left-color: #667eea;
            box-shadow: 0 3px 10px rgba(102, 126, 234, 0.2);
        }

        .rank-icon {
            font-size: 2em;
            margin-right: 15px;
        }

        .rank-info {
            flex: 1;
        }

        .rank-name-text {
            font-weight: bold;
            font-size: 1.1em;
            color: #2d3748;
        }

        .rank-requirement {
            font-size: 0.9em;
            color: #718096;
        }

        .leaderboard-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            border: 2px solid #e2e8f0;
        }

        .leaderboard-position {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            min-width: 50px;
            text-align: center;
        }

        .leaderboard-info {
            flex: 1;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .close-modal {
            float: right;
            font-size: 2em;
            cursor: pointer;
            color: #718096;
            line-height: 0.5;
        }

        .combo-counter {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4em;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 999;
        }

        .combo-counter.show {
            opacity: 1;
            animation: comboPopup 0.8s ease;
        }

        @keyframes comboPopup {
            0% { transform: translate(-50%, -50%) scale(0.5); }
            50% { transform: translate(-50%, -50%) scale(1.2); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 2px solid #e2e8f0;
            }

            .rank-display {
                position: static;
                margin-bottom: 20px;
            }

            .options-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="rank-display">
                <div class="rank-title">Dein Rang</div>
                <div class="rank-name" id="playerRank">Anf√§nger</div>
            </div>
            <h1>‚öîÔ∏è Vokabel-Arena</h1>
            <p>Klettere die R√§nge zum A-Level Champion!</p>
        </div>

        <div class="stats-bar">
            <div class="stat-card">
                <div class="stat-icon">üèÜ</div>
                <div class="stat-label">Gesamtpunkte</div>
                <div class="stat-value" id="totalPoints">0</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="pointsProgress" style="width: 0%"></div>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">üìö</div>
                <div class="stat-label">Gemeisterte W√∂rter</div>
                <div class="stat-value" id="masteredWords">0</div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">üî•</div>
                <div class="stat-label">Tagesstreak</div>
                <div class="stat-value" id="streakCount">0</div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">‚ö°</div>
                <div class="stat-label">Combo</div>
                <div class="stat-value" id="comboCount">0x</div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">üéØ</div>
                <div class="stat-label">Genauigkeit</div>
                <div class="stat-value" id="accuracyRate">100%</div>
            </div>
        </div>

        <div class="main-content">
            <div class="sidebar">
                <h3 style="margin-bottom: 20px; color: #667eea;">üéÆ Spielmodi</h3>
                <div id="sidebarContent"></div>
            </div>

            <div class="content-area" id="mainContent">
                <!-- Content will be dynamically loaded here -->
            </div>
        </div>
    </div>

    <div class="combo-counter" id="comboDisplay"></div>

    <!-- Modal for tips and info -->
    <div class="modal" id="tipsModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeTipsModal()">&times;</span>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        // ============= GAME DATA =============
        
        const vocabDatabase = {
            level1: [
                { word: "gut", translation: "good", example: "Das Essen war sehr gut.", register: "allt√§glich", level: 1 },
                { word: "schlecht", translation: "bad", example: "Das Wetter ist heute schlecht.", register: "allt√§glich", level: 1 },
                { word: "wichtig", translation: "important", example: "Diese Pr√ºfung ist wichtig.", register: "allt√§glich", level: 1 },
                { word: "interessant", translation: "interesting", example: "Der Film war interessant.", register: "allt√§glich", level: 1 },
                { word: "sch√∂n", translation: "beautiful/nice", example: "Das ist ein sch√∂nes Bild.", register: "allt√§glich", level: 1 },
                { word: "gro√ü", translation: "big/large", example: "Berlin ist eine gro√üe Stadt.", register: "allt√§glich", level: 1 },
                { word: "klein", translation: "small", example: "Meine Wohnung ist klein.", register: "allt√§glich", level: 1 },
                { word: "neu", translation: "new", example: "Ich habe ein neues Handy.", register: "allt√§glich", level: 1 },
                { word: "denken", translation: "to think", example: "Ich denke √ºber das Problem nach.", register: "allt√§glich", level: 1 },
                { word: "sagen", translation: "to say", example: "Was sagst du dazu?", register: "allt√§glich", level: 1 },
                { word: "machen", translation: "to do/make", example: "Was machst du heute?", register: "allt√§glich", level: 1 },
                { word: "sehen", translation: "to see", example: "Ich sehe einen Film.", register: "allt√§glich", level: 1 },
                { word: "wissen", translation: "to know", example: "Ich wei√ü es nicht.", register: "allt√§glich", level: 1 },
                { word: "verstehen", translation: "to understand", example: "Verstehst du das?", register: "allt√§glich", level: 1 },
                { word: "das Problem", translation: "the problem", example: "Das ist ein gro√ües Problem.", register: "allt√§glich", level: 1 },
                { word: "die Idee", translation: "the idea", example: "Das ist eine gute Idee.", register: "allt√§glich", level: 1 },
                { word: "aber", translation: "but", example: "Ich mag Kaffee, aber nicht Tee.", register: "allt√§glich", level: 1 },
                { word: "weil", translation: "because", example: "Ich lerne Deutsch, weil es wichtig ist.", register: "allt√§glich", level: 1 },
                { word: "wenn", translation: "if/when", example: "Wenn es regnet, bleibe ich zu Hause.", register: "allt√§glich", level: 1 },
                { word: "obwohl", translation: "although", example: "Ich bin m√ºde, obwohl ich geschlafen habe.", register: "allt√§glich", level: 1 },
            ],
            level2: [
                { word: "ausgezeichnet", translation: "excellent", example: "Die Leistung war ausgezeichnet.", register: "gehoben", level: 2 },
                { word: "hervorragend", translation: "outstanding", example: "Er hat eine hervorragende Arbeit geleistet.", register: "gehoben", level: 2 },
                { word: "bedeutend", translation: "significant", example: "Das ist eine bedeutende Entscheidung.", register: "gehoben", level: 2 },
                { word: "bemerkenswert", translation: "remarkable", example: "Die Entwicklung ist bemerkenswert.", register: "gehoben", level: 2 },
                { word: "erheblich", translation: "considerable", example: "Es gibt erhebliche Unterschiede.", register: "gehoben", level: 2 },
                { word: "wesentlich", translation: "essential", example: "Das ist ein wesentlicher Punkt.", register: "gehoben", level: 2 },
                { word: "umfassend", translation: "comprehensive", example: "Wir brauchen eine umfassende Analyse.", register: "gehoben", level: 2 },
                { word: "vielf√§ltig", translation: "diverse", example: "Die Kultur ist vielf√§ltig.", register: "gehoben", level: 2 },
                { word: "verdeutlichen", translation: "to clarify", example: "Das Beispiel verdeutlicht das Problem.", register: "gehoben", level: 2 },
                { word: "betonen", translation: "to emphasize", example: "Man muss die Bedeutung betonen.", register: "gehoben", level: 2 },
                { word: "hervorheben", translation: "to highlight", example: "Er hebt die Vorteile hervor.", register: "gehoben", level: 2 },
                { word: "analysieren", translation: "to analyze", example: "Wir m√ºssen die Daten analysieren.", register: "gehoben", level: 2 },
                { word: "erl√§utern", translation: "to explain", example: "K√∂nnen Sie das n√§her erl√§utern?", register: "gehoben", level: 2 },
                { word: "darstellen", translation: "to represent", example: "Die Grafik stellt die Entwicklung dar.", register: "gehoben", level: 2 },
                { word: "beurteilen", translation: "to judge/assess", example: "Man kann die Situation unterschiedlich beurteilen.", register: "gehoben", level: 2 },
                { word: "vergleichen", translation: "to compare", example: "Man muss beide Systeme vergleichen.", register: "gehoben", level: 2 },
                { word: "ber√ºcksichtigen", translation: "to consider", example: "Man sollte alle Faktoren ber√ºcksichtigen.", register: "gehoben", level: 2 },
                { word: "allerdings", translation: "however", example: "Das ist wahr, allerdings gibt es Probleme.", register: "gehoben", level: 2 },
                { word: "demzufolge", translation: "consequently", example: "Demzufolge m√ºssen wir handeln.", register: "gehoben", level: 2 },
                { word: "hingegen", translation: "on the other hand", example: "Gruppe A ist daf√ºr, Gruppe B hingegen dagegen.", register: "gehoben", level: 2 },
            ],
            level3: [
                { word: "exzellent", translation: "excellent", example: "Die Arbeit ist von exzellenter Qualit√§t.", register: "formell", level: 3 },
                { word: "vorz√ºglich", translation: "superior", example: "Das ist eine vorz√ºgliche Leistung.", register: "formell", level: 3 },
                { word: "ma√ügeblich", translation: "decisive", example: "Das war ein ma√ügeblicher Faktor.", register: "formell", level: 3 },
                { word: "signifikant", translation: "significant", example: "Die √Ñnderung ist statistisch signifikant.", register: "formell", level: 3 },
                { word: "evident", translation: "evident", example: "Der Zusammenhang ist evident.", register: "formell", level: 3 },
                { word: "pr√§gnant", translation: "succinct", example: "Die Formulierung ist pr√§gnant.", register: "formell", level: 3 },
                { word: "differenziert", translation: "nuanced", example: "Man braucht eine differenzierte Betrachtung.", register: "formell", level: 3 },
                { word: "ambivalent", translation: "ambivalent", example: "Die Haltung ist ambivalent.", register: "formell", level: 3 },
                { word: "veranschaulichen", translation: "to illustrate", example: "Das Beispiel veranschaulicht die Theorie.", register: "formell", level: 3 },
                { word: "implizieren", translation: "to imply", example: "Die Aussage impliziert eine Kritik.", register: "formell", level: 3 },
                { word: "kontrastieren", translation: "to contrast", example: "Die Studien kontrastieren deutlich.", register: "formell", level: 3 },
                { word: "legitimieren", translation: "to legitimize", example: "Das legitimiert die Entscheidung.", register: "formell", level: 3 },
                { word: "postulieren", translation: "to postulate", example: "Der Autor postuliert eine neue Theorie.", register: "formell", level: 3 },
                { word: "manifestieren", translation: "to manifest", example: "Das Problem manifestiert sich in verschiedenen Bereichen.", register: "formell", level: 3 },
                { word: "konstatieren", translation: "to ascertain", example: "Man muss konstatieren, dass es Probleme gibt.", register: "formell", level: 3 },
                { word: "nichtsdestotrotz", translation: "nevertheless", example: "Nichtsdestotrotz bleibt das Problem bestehen.", register: "formell", level: 3 },
                { word: "folglich", translation: "consequently", example: "Folglich muss man anders handeln.", register: "formell", level: 3 },
                { word: "insofern", translation: "insofar", example: "Insofern als das stimmt, ist es problematisch.", register: "formell", level: 3 },
                { word: "mithin", translation: "thus", example: "Mithin ergibt sich ein Widerspruch.", register: "formell", level: 3 },
                { word: "wohingegen", translation: "whereas", example: "Das System funktioniert, wohingegen das andere scheitert.", register: "formell", level: 3 },
            ],
            level4: [
                { word: "ausschlaggebend", translation: "crucial", example: "Das war der ausschlaggebende Faktor.", register: "akademisch", level: 4 },
                { word: "konstitutiv", translation: "constitutive", example: "Das Element ist konstitutiv f√ºr die Theorie.", register: "akademisch", level: 4 },
                { word: "inh√§rent", translation: "inherent", example: "Das Problem ist dem System inh√§rent.", register: "akademisch", level: 4 },
                { word: "diametral", translation: "diametrically", example: "Die Positionen sind diametral entgegengesetzt.", register: "akademisch", level: 4 },
                { word: "paradigmatisch", translation: "paradigmatic", example: "Das ist ein paradigmatischer Fall.", register: "akademisch", level: 4 },
                { word: "intrinsisch", translation: "intrinsic", example: "Die Motivation ist intrinsisch.", register: "akademisch", level: 4 },
                { word: "kongruent", translation: "congruent", example: "Die Aussagen sind nicht kongruent.", register: "akademisch", level: 4 },
                { word: "elaboriert", translation: "elaborate", example: "Das ist eine elaborierte Theorie.", register: "akademisch", level: 4 },
                { word: "deduzieren", translation: "to deduce", example: "Man kann daraus deduzieren, dass...", register: "akademisch", level: 4 },
                { word: "inferieren", translation: "to infer", example: "Daraus l√§sst sich inferieren, dass...", register: "akademisch", level: 4 },
                { word: "subsumieren", translation: "to subsume", example: "Man kann beide F√§lle unter diesem Begriff subsumieren.", register: "akademisch", level: 4 },
                { word: "verifizieren", translation: "to verify", example: "Die Hypothese muss verifiziert werden.", register: "akademisch", level: 4 },
                { word: "falsifizieren", translation: "to falsify", example: "Die Theorie l√§sst sich nicht falsifizieren.", register: "akademisch", level: 4 },
                { word: "konzeptualisieren", translation: "to conceptualize", example: "Man muss das Problem neu konzeptualisieren.", register: "akademisch", level: 4 },
                { word: "kontextualisieren", translation: "to contextualize", example: "Man muss die Aussage historisch kontextualisieren.", register: "akademisch", level: 4 },
                { word: "die Pr√§misse", translation: "the premise", example: "Die Pr√§misse der Argumentation ist fragw√ºrdig.", register: "akademisch", level: 4 },
                { word: "die Dichotomie", translation: "the dichotomy", example: "Es besteht eine Dichotomie zwischen Theorie und Praxis.", register: "akademisch", level: 4 },
                { word: "die Kausalit√§t", translation: "the causality", example: "Die Kausalit√§t ist schwer nachzuweisen.", register: "akademisch", level: 4 },
                { word: "gleichwohl", translation: "nevertheless", example: "Gleichwohl bleibt die Frage offen.", register: "akademisch", level: 4 },
                { word: "zumal", translation: "especially since", example: "Das ist problematisch, zumal die Evidenz fehlt.", register: "akademisch", level: 4 },
            ],
            level5: [
                { word: "genuin", translation: "genuine", example: "Das ist eine genuine Innovation.", register: "h√∂chststufe", level: 5 },
                { word: "ubiquit√§r", translation: "ubiquitous", example: "Das Ph√§nomen ist ubiquit√§r.", register: "h√∂chststufe", level: 5 },
                { word: "sui generis", translation: "unique", example: "Das Ph√§nomen ist sui generis.", register: "h√∂chststufe", level: 5 },
                { word: "a priori", translation: "a priori", example: "Die Annahme ist a priori g√ºltig.", register: "h√∂chststufe", level: 5 },
                { word: "apodiktisch", translation: "apodictic", example: "Die Aussage ist apodiktisch.", register: "h√∂chststufe", level: 5 },
                { word: "heterogen", translation: "heterogeneous", example: "Die Gruppe ist heterogen.", register: "h√∂chststufe", level: 5 },
                { word: "omnipr√§sent", translation: "omnipresent", example: "Das Motiv ist omnipr√§sent.", register: "h√∂chststufe", level: 5 },
                { word: "dekonstruieren", translation: "to deconstruct", example: "Man muss den Begriff dekonstruieren.", register: "h√∂chststufe", level: 5 },
                { word: "rekonstruieren", translation: "to reconstruct", example: "Man kann die Argumentation rekonstruieren.", register: "h√∂chststufe", level: 5 },
                { word: "synthetisieren", translation: "to synthesize", example: "Man muss beide Ans√§tze synthetisieren.", register: "h√∂chststufe", level: 5 },
                { word: "dialektisieren", translation: "to dialecticize", example: "Man kann die Position dialektisieren.", register: "h√∂chststufe", level: 5 },
                { word: "problematisieren", translation: "to problematize", example: "Man sollte diese Annahme problematisieren.", register: "h√∂chststufe", level: 5 },
                { word: "explizieren", translation: "to explicate", example: "Man muss den Begriff explizieren.", register: "h√∂chststufe", level: 5 },
                { word: "substantiieren", translation: "to substantiate", example: "Die These muss substantiiert werden.", register: "h√∂chststufe", level: 5 },
                { word: "transzendieren", translation: "to transcend", example: "Das Werk transzendiert seine Zeit.", register: "h√∂chststufe", level: 5 },
                { word: "die Dialektik", translation: "the dialectic", example: "Die Dialektik von Form und Inhalt ist zentral.", register: "h√∂chststufe", level: 5 },
                { word: "die Antinomie", translation: "the antinomy", example: "Es besteht eine Antinomie zwischen beiden Prinzipien.", register: "h√∂chststufe", level: 5 },
                { word: "die Quintessenz", translation: "the quintessence", example: "Das ist die Quintessenz der Debatte.", register: "h√∂chststufe", level: 5 },
                { word: "freilich", translation: "admittedly", example: "Freilich bleibt diese Frage offen.", register: "h√∂chststufe", level: 5 },
                { word: "mitnichten", translation: "by no means", example: "Das ist mitnichten der Fall.", register: "h√∂chststufe", level: 5 },
            ]
        };

        const ranks = [
            { name: "Anf√§nger", icon: "üå±", points: 0 },
            { name: "Lehrling", icon: "üìñ", points: 500 },
            { name: "Fortgeschrittener", icon: "üìö", points: 1000 },
            { name: "Experte", icon: "üéì", points: 2000 },
            { name: "Meister", icon: "‚≠ê", points: 3500 },
            { name: "Gro√ümeister", icon: "üíé", points: 5000 },
            { name: "Legende", icon: "üëë", points: 7500 },
            { name: "A-Level Champion", icon: "üèÜ", points: 10000 }
        ];

        const gameModes = [
            {
                id: "speed-match",
                icon: "‚ö°",
                title: "Blitz-Match",
                description: "Wie schnell kannst du Synonyme zuordnen? Trainiere dein Wortschatz-Ged√§chtnis unter Zeitdruck!",
                difficulty: "easy",
                pointsBase: 10,
                timeLimit: 60
            },
            {
                id: "level-climb",
                icon: "ü™ú",
                title: "Stufen-Klettern",
                description: "Ordne W√∂rter ihrer Sophistikationsstufe zu. Von allt√§glich bis akademisch!",
                difficulty: "medium",
                pointsBase: 20,
                timeLimit: 90
            },
            {
                id: "translation-sprint",
                icon: "üåê",
                title: "√úbersetzungs-Sprint",
                description: "√úbersetze so viele W√∂rter wie m√∂glich in 60 Sekunden!",
                difficulty: "medium",
                pointsBase: 15,
                timeLimit: 60
            },
            {
                id: "context-master",
                icon: "üìù",
                title: "Kontext-Meister",
                description: "W√§hle das beste Wort f√ºr den akademischen Kontext. Perfekt f√ºr Essay-Vorbereitung!",
                difficulty: "hard",
                pointsBase: 30,
                timeLimit: 120
            },
            {
                id: "synonym-chains",
                icon: "üîó",
                title: "Synonym-Ketten",
                description: "Baue Ketten von Synonymen auf verschiedenen Stufen. Zeige deine Wortschatz-Tiefe!",
                difficulty: "hard",
                pointsBase: 25,
                timeLimit: 90
            },
            {
                id: "vocab-builder",
                icon: "üèóÔ∏è",
                title: "Vokabel-Baukasten",
                description: "W√§hle deine W√∂rter aus und baue dein pers√∂nliches Vokabular f√ºr die n√§chste Stufe!",
                difficulty: "easy",
                pointsBase: 5,
                timeLimit: null
            },
            {
                id: "essay-prep",
                icon: "‚úçÔ∏è",
                title: "Essay-Vorbereitung",
                description: "√úbe mit echten A-Level Themen und baue akademische Argumente mit gehobenem Vokabular!",
                difficulty: "expert",
                pointsBase: 50,
                timeLimit: 180
            },
            {
                id: "register-recognition",
                icon: "üéØ",
                title: "Register-Erkennung",
                description: "Erkenne ob W√∂rter allt√§glich, gehoben, formell oder akademisch sind!",
                difficulty: "medium",
                pointsBase: 20,
                timeLimit: 75
            }
        ];

        // ============= GAME STATE =============
        
        let gameState = {
            totalPoints: 0,
            masteredWords: 0,
            streak: 0,
            combo: 0,
            accuracyRate: 100,
            totalCorrect: 0,
            totalAttempts: 0,
            currentRank: 0,
            completedGames: 0,
            personalVocab: [],
            lastVisit: null
        };

        // Load saved state
        if (localStorage.getItem('vocabArenaState')) {
            gameState = JSON.parse(localStorage.getItem('vocabArenaState'));
        }

        // ============= INITIALIZATION =============
        
        function init() {
            updateStats();
            loadGameModes();
            checkStreak();
            showHomeScreen();
        }

        function saveState() {
            localStorage.setItem('vocabArenaState', JSON.stringify(gameState));
        }

        function updateStats() {
            document.getElementById('totalPoints').textContent = gameState.totalPoints;
            document.getElementById('masteredWords').textContent = gameState.masteredWords;
            document.getElementById('streakCount').textContent = gameState.streak;
            document.getElementById('comboCount').textContent = gameState.combo + 'x';
            document.getElementById('accuracyRate').textContent = gameState.accuracyRate + '%';
            
            // Update rank
            let currentRank = ranks[0];
            for (let i = ranks.length - 1; i >= 0; i--) {
                if (gameState.totalPoints >= ranks[i].points) {
                    currentRank = ranks[i];
                    gameState.currentRank = i;
                    break;
                }
            }
            document.getElementById('playerRank').textContent = currentRank.icon + ' ' + currentRank.name;
            
            // Update progress bar
            const nextRank = ranks[Math.min(gameState.currentRank + 1, ranks.length - 1)];
            const progress = ((gameState.totalPoints - currentRank.points) / (nextRank.points - currentRank.points)) * 100;
            document.getElementById('pointsProgress').style.width = Math.min(progress, 100) + '%';
        }

        function checkStreak() {
            const today = new Date().toDateString();
            if (gameState.lastVisit !== today) {
                const lastVisit = new Date(gameState.lastVisit);
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);
                
                if (gameState.lastVisit === yesterday.toDateString()) {
                    gameState.streak++;
                } else if (gameState.lastVisit && gameState.lastVisit !== today) {
                    gameState.streak = 1;
                } else {
                    gameState.streak = 1;
                }
                
                gameState.lastVisit = today;
                saveState();
            }
        }

        function addPoints(points) {
            gameState.totalPoints += points;
            updateStats();
            saveState();
        }

        function incrementCombo() {
            gameState.combo++;
            updateStats();
            
            // Show combo animation
            if (gameState.combo > 2) {
                showCombo();
            }
        }

        function resetCombo() {
            gameState.combo = 0;
            updateStats();
        }

        function showCombo() {
            const comboDisplay = document.getElementById('comboDisplay');
            comboDisplay.textContent = gameState.combo + 'x COMBO!';
            comboDisplay.classList.add('show');
            setTimeout(() => {
                comboDisplay.classList.remove('show');
            }, 800);
        }

        function updateAccuracy(correct) {
            gameState.totalAttempts++;
            if (correct) {
                gameState.totalCorrect++;
            }
            gameState.accuracyRate = Math.round((gameState.totalCorrect / gameState.totalAttempts) * 100);
            updateStats();
            saveState();
        }

        // ============= UI FUNCTIONS =============
        
        function loadGameModes() {
            const sidebar = document.getElementById('sidebarContent');
            sidebar.innerHTML = `
                <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 15px; border-radius: 10px; margin-bottom: 20px; cursor: pointer;" onclick="showRankLadder()">
                    <div style="text-align: center;">
                        <div style="font-size: 2em; margin-bottom: 5px;">${ranks[gameState.currentRank].icon}</div>
                        <div style="font-weight: bold;">Rang-Leiter anzeigen</div>
                    </div>
                </div>
                
                <div style="background: white; padding: 15px; border-radius: 10px; margin-bottom: 20px; cursor: pointer; border: 2px solid #667eea;" onclick="showCambridgeTips()">
                    <div style="text-align: center;">
                        <div style="font-size: 2em; margin-bottom: 5px;">üí°</div>
                        <div style="font-weight: bold; color: #667eea;">Cambridge A-Level Tips</div>
                    </div>
                </div>
                
                <div style="background: white; padding: 15px; border-radius: 10px; cursor: pointer; border: 2px solid #48bb78;" onclick="showVocabTips()">
                    <div style="text-align: center;">
                        <div style="font-size: 2em; margin-bottom: 5px;">üìö</div>
                        <div style="font-weight: bold; color: #48bb78;">Lernstrategien</div>
                    </div>
                </div>
            `;
        }

        function showHomeScreen() {
            const content = document.getElementById('mainContent');
            content.innerHTML = `
                <h2 style="margin-bottom: 30px; color: #667eea;">üéÆ W√§hle deinen Spielmodus</h2>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 20px;">
                    ${gameModes.map(mode => `
                        <div class="game-mode-card" onclick="startGame('${mode.id}')">
                            <div class="mode-icon">${mode.icon}</div>
                            <div class="mode-title">${mode.title}</div>
                            <div class="mode-description">${mode.description}</div>
                            <span class="difficulty-badge difficulty-${mode.difficulty}">
                                ${mode.difficulty === 'easy' ? '‚≠ê Einfach' : 
                                  mode.difficulty === 'medium' ? '‚≠ê‚≠ê Mittel' :
                                  mode.difficulty === 'hard' ? '‚≠ê‚≠ê‚≠ê Schwer' :
                                  '‚≠ê‚≠ê‚≠ê‚≠ê Experte'}
                            </span>
                            <div class="mode-stats">
                                <div class="mode-stat">
                                    <div class="mode-stat-value">${mode.pointsBase}+</div>
                                    <div class="mode-stat-label">Punkte</div>
                                </div>
                                <div class="mode-stat">
                                    <div class="mode-stat-value">${mode.timeLimit ? mode.timeLimit + 's' : '‚àû'}</div>
                                    <div class="mode-stat-label">Zeit</div>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function showRankLadder() {
            const content = document.getElementById('mainContent');
            content.innerHTML = `
                <h2 style="margin-bottom: 30px; color: #667eea;">üèÜ Rang-Leiter</h2>
                
                <div class="rank-ladder">
                    ${ranks.map((rank, index) => `
                        <div class="rank-item ${index === gameState.currentRank ? 'current' : ''}">
                            <div class="rank-icon">${rank.icon}</div>
                            <div class="rank-info">
                                <div class="rank-name-text">${rank.name}</div>
                                <div class="rank-requirement">${rank.points} Punkte ben√∂tigt</div>
                            </div>
                            ${index === gameState.currentRank ? '<div style="color: #667eea; font-weight: bold;">‚Üê Du bist hier!</div>' : ''}
                            ${index < gameState.currentRank ? '<div style="color: #48bb78; font-weight: bold;">‚úì Erreicht</div>' : ''}
                            ${index > gameState.currentRank ? `<div style="color: #718096;">${rank.points - gameState.totalPoints} Punkte fehlen</div>` : ''}
                        </div>
                    `).reverse().join('')}
                </div>
                
                <button class="button" onclick="showHomeScreen()">Zur√ºck zu den Spielmodi</button>
            `;
        }

        function showCambridgeTips() {
            const modalContent = document.getElementById('modalContent');
            modalContent.innerHTML = `
                <h2 style="color: #667eea; margin-bottom: 20px;">üí° Cambridge A-Level Deutsch: Warum Vokabular entscheidend ist</h2>
                
                <div class="tips-panel">
                    <div class="tips-title">üéØ Bewertungskriterien verstehen</div>
                    <div class="tip-item">
                        <strong>AO1 (Knowledge):</strong> Das Cambridge A-Level bewertet deine F√§higkeit, <strong>pr√§zises und vielf√§ltiges Vokabular</strong> zu verwenden. Einfache W√∂rter wie "gut" oder "wichtig" reichen nicht f√ºr Top-Noten!
                    </div>
                    <div class="tip-item">
                        <strong>AO4 (Language):</strong> Bis zu 40% deiner Note h√§ngen von <strong>sprachlicher Genauigkeit und Reichweite</strong> ab. Gehobenes Vokabular zeigt linguistic sophistication.
                    </div>
                </div>
                
                <div class="tips-panel" style="border-left-color: #48bb78;">
                    <div class="tips-title">üìà Stufen-System f√ºr A-Level Essays</div>
                    <div class="tip-item">
                        <strong>Stufe 1-2:</strong> Basis f√ºr AS-Level und schw√§chere A2-Essays
                    </div>
                    <div class="tip-item">
                        <strong>Stufe 3:</strong> Erforderlich f√ºr solide A-Level Aufs√§tze (B-Note)
                    </div>
                    <div class="tip-item">
                        <strong>Stufe 4-5:</strong> Notwendig f√ºr A* Essays. Zeigt <strong>akademische Reife</strong> und kritisches Denken.
                    </div>
                </div>
                
                <div class="tips-panel" style="border-left-color: #ffa500;">
                    <div class="tips-title">‚ö° Praktische Tipps f√ºr die Pr√ºfung</div>
                    <div class="tip-item">
                        <strong>Variiere deine Konnektoren:</strong> Statt immer "aber" ‚Üí "allerdings", "hingegen", "nichtsdestotrotz", "gleichwohl"
                    </div>
                    <div class="tip-item">
                        <strong>Verben sind K√∂nig:</strong> Analytische Verben wie "veranschaulichen", "implizieren", "problematisieren" zeigen Denktiefe
                    </div>
                    <div class="tip-item">
                        <strong>Register beachten:</strong> Literaturanalysen brauchen formelles Register. Allt√§gliche Sprache kostet Punkte!
                    </div>
                    <div class="tip-item">
                        <strong>Synonym-Vielfalt:</strong> Wiederhole nie dasselbe Wort! Nutze die Wort-Leitern in diesem System.
                    </div>
                </div>
                
                <div class="tips-panel" style="border-left-color: #e53e3e;">
                    <div class="tips-title">‚ùå H√§ufige Fehler vermeiden</div>
                    <div class="tip-item">
                        <strong>Zu einfach:</strong> "Der Autor sagt, dass..." ‚Üí "Der Autor postuliert, dass..." / "konstatiert, dass..."
                    </div>
                    <div class="tip-item">
                        <strong>Umgangssprache:</strong> Vermeide W√∂rter wie "cool", "toll" in akademischen Essays
                    </div>
                    <div class="tip-item">
                        <strong>Falsche Register-Mischung:</strong> Bleib konsistent formell in Essays!
                    </div>
                </div>
                
                <button class="button" onclick="closeTipsModal()">Verstanden! Los geht's!</button>
            `;
            document.getElementById('tipsModal').classList.add('show');
        }

        function showVocabTips() {
            const modalContent = document.getElementById('modalContent');
            modalContent.innerHTML = `
                <h2 style="color: #48bb78; margin-bottom: 20px;">üìö Effektive Lernstrategien</h2>
                
                <div class="tips-panel">
                    <div class="tips-title">üß† Wissenschaftlich bew√§hrte Methoden</div>
                    <div class="tip-item">
                        <strong>Spaced Repetition:</strong> Wiederhole Vokabeln in zunehmenden Abst√§nden (1 Tag, 3 Tage, 1 Woche, 1 Monat)
                    </div>
                    <div class="tip-item">
                        <strong>Aktives Abrufen:</strong> Teste dich selbst statt passiv zu lesen. Daher: Spielmodi nutzen!
                    </div>
                    <div class="tip-item">
                        <strong>Kontextuelles Lernen:</strong> Lerne W√∂rter in S√§tzen, nicht isoliert. Alle Beispiele hier nutzen!
                    </div>
                </div>
                
                <div class="tips-panel" style="border-left-color: #667eea;">
                    <div class="tips-title">üéØ T√§gliche Praxis</div>
                    <div class="tip-item">
                        <strong>15 Minuten t√§glich:</strong> Besser als 2 Stunden am Wochenende! Halte deinen Streak aufrecht üî•
                    </div>
                    <div class="tip-item">
                        <strong>Ziele setzen:</strong> 5 neue W√∂rter pro Tag = 35/Woche = 150/Monat
                    </div>
                    <div class="tip-item">
                        <strong>Vielf√§ltige Modi:</strong> Wechsle zwischen Spielmodi f√ºr unterschiedliche Lernarten
                    </div>
                </div>
                
                <div class="tips-panel" style="border-left-color: #ffa500;">
                    <div class="tips-title">üìù Anwendung in Essays</div>
                    <div class="tip-item">
                        <strong>Vokabel-Notizen:</strong> Schreibe vor jedem Essay 10 gehobene W√∂rter auf, die du verwenden willst
                    </div>
                    <div class="tip-item">
                        <strong>Synonym-Listen:</strong> Halte Listen f√ºr h√§ufige Basis-W√∂rter bereit (gut ‚Üí hervorragend ‚Üí exzellent)
                    </div>
                    <div class="tip-item">
                        <strong>Essay-Phrasenbank:</strong> Baue dir eine Sammlung von Redemitteln f√ºr Einleitungen, √úberg√§nge, Schl√ºsse
                    </div>
                </div>
                
                <div class="tips-panel" style="border-left-color: #e53e3e;">
                    <div class="tips-title">‚ö° Power-Tipps</div>
                    <div class="tip-item">
                        <strong>Visualisiere:</strong> Erstelle Mindmaps mit Synonym-Ketten
                    </div>
                    <div class="tip-item">
                        <strong>Verbinde:</strong> Verkn√ºpfe neue W√∂rter mit Bildern oder pers√∂nlichen Assoziationen
                    </div>
                    <div class="tip-item">
                        <strong>Spreche laut:</strong> Sag die W√∂rter und Beispiels√§tze laut f√ºr bessere Verankerung
                    </div>
                    <div class="tip-item">
                        <strong>Gruppe:</strong> Lerne W√∂rter in thematischen Gruppen (z.B. alle "Analyse-Verben" zusammen)
                    </div>
                </div>
                
                <button class="button success" onclick="closeTipsModal()">Perfekt! Jetzt √ºben!</button>
            `;
            document.getElementById('tipsModal').classList.add('show');
        }

        function closeTipsModal() {
            document.getElementById('tipsModal').classList.remove('show');
        }

        // ============= GAME MODES =============
        
        function startGame(modeId) {
            resetCombo();
            
            switch(modeId) {
                case 'speed-match':
                    startSpeedMatch();
                    break;
                case 'level-climb':
                    startLevelClimb();
                    break;
                case 'translation-sprint':
                    startTranslationSprint();
                    break;
                case 'context-master':
                    startContextMaster();
                    break;
                case 'synonym-chains':
                    startSynonymChains();
                    break;
                case 'vocab-builder':
                    startVocabBuilder();
                    break;
                case 'essay-prep':
                    startEssayPrep();
                    break;
                case 'register-recognition':
                    startRegisterRecognition();
                    break;
            }
        }

        // ============= SPEED MATCH =============
        
        function startSpeedMatch() {
            const allVocab = [
                ...vocabDatabase.level1,
                ...vocabDatabase.level2,
                ...vocabDatabase.level3
            ];
            
            const selectedWords = allVocab.sort(() => 0.5 - Math.random()).slice(0, 10);
            let currentQuestion = 0;
            let score = 0;
            let timeLeft = 60;
            let timerInterval;
            
            function showQuestion() {
                if (currentQuestion >= selectedWords.length || timeLeft <= 0) {
                    endGame();
                    return;
                }
                
                const word = selectedWords[currentQuestion];
                const options = generateTranslationOptions(word, allVocab);
                
                const content = document.getElementById('mainContent');
                content.innerHTML = `
                    <div class="quiz-container">
                        <div class="quiz-header">
                            <div class="quiz-progress">Frage ${currentQuestion + 1} von ${selectedWords.length}</div>
                            <div class="quiz-timer" id="timer">${timeLeft}s</div>
                            <div class="quiz-score">Punkte: ${score}</div>
                        </div>
                        
                        <div class="question-card">
                            <div class="question-text">${word.word}</div>
                            <div class="question-hint">Was bedeutet dieses Wort?</div>
                        </div>
                        
                        <div class="options-grid">
                            ${options.map((option, index) => `
                                <div class="option-card" onclick="checkSpeedAnswer(${index}, '${option}', '${word.translation}')">
                                    <div class="option-text">${option}</div>
                                </div>
                            `).join('')}
                        </div>
                        
                        <div id="feedbackArea"></div>
                    </div>
                `;
                
                // Start timer if first question
                if (currentQuestion === 0) {
                    timerInterval = setInterval(() => {
                        timeLeft--;
                        document.getElementById('timer').textContent = timeLeft + 's';
                        if (timeLeft <= 0) {
                            clearInterval(timerInterval);
                            endGame();
                        }
                    }, 1000);
                }
            }
            
            function generateTranslationOptions(correctWord, allWords) {
                const options = [correctWord.translation];
                const otherWords = allWords.filter(w => w !== correctWord);
                
                while (options.length < 4) {
                    const random = otherWords[Math.floor(Math.random() * otherWords.length)];
                    if (!options.includes(random.translation)) {
                        options.push(random.translation);
                    }
                }
                
                return options.sort(() => 0.5 - Math.random());
            }
            
            window.checkSpeedAnswer = function(index, selected, correct) {
                clearInterval(timerInterval);
                
                const options = document.querySelectorAll('.option-card');
                options.forEach(opt => opt.classList.add('disabled'));
                
                const isCorrect = selected === correct;
                options[index].classList.add(isCorrect ? 'correct' : 'incorrect');
                
                if (isCorrect) {
                    score += 10 + (gameState.combo * 2);
                    incrementCombo();
                    updateAccuracy(true);
                    
                    document.getElementById('feedbackArea').innerHTML = `
                        <div class="feedback-panel correct">
                            <div class="feedback-title">‚úÖ Richtig! +${10 + ((gameState.combo - 1) * 2)} Punkte</div>
                            <div class="feedback-explanation">Combo: ${gameState.combo}x</div>
                        </div>
                    `;
                } else {
                    resetCombo();
                    updateAccuracy(false);
                    
                    document.getElementById('feedbackArea').innerHTML = `
                        <div class="feedback-panel incorrect">
                            <div class="feedback-title">‚ùå Falsch!</div>
                            <div class="feedback-explanation">Richtige Antwort: <strong>${correct}</strong></div>
                        </div>
                    `;
                }
                
                setTimeout(() => {
                    currentQuestion++;
                    
                    // Restart timer
                    timerInterval = setInterval(() => {
                        timeLeft--;
                        if (document.getElementById('timer')) {
                            document.getElementById('timer').textContent = timeLeft + 's';
                        }
                        if (timeLeft <= 0) {
                            clearInterval(timerInterval);
                            endGame();
                        }
                    }, 1000);
                    
                    showQuestion();
                }, 1500);
            };
            
            function endGame() {
                clearInterval(timerInterval);
                addPoints(score);
                gameState.completedGames++;
                saveState();
                
                const content = document.getElementById('mainContent');
                content.innerHTML = `
                    <div class="results-screen">
                        <div class="results-icon">${score > 100 ? 'üèÜ' : score > 50 ? '‚≠ê' : 'üëç'}</div>
                        <div class="results-title">Spiel beendet!</div>
                        <div class="results-score">${score} Punkte</div>
                        
                        <div class="results-stats">
                            <div class="result-stat-card">
                                <div class="result-stat-value">${currentQuestion}</div>
                                <div class="result-stat-label">Fragen beantwortet</div>
                            </div>
                            <div class="result-stat-card">
                                <div class="result-stat-value">${Math.round((score / (currentQuestion * 10)) * 100)}%</div>
                                <div class="result-stat-label">Effizienz</div>
                            </div>
                        </div>
                        
                        ${score > 100 ? `
                            <div class="achievement-earned">
                                <h3>üéâ Neues Abzeichen freigeschaltet!</h3>
                                <div>Blitz-Meister - 100+ Punkte im Speed Match</div>
                            </div>
                        ` : ''}
                        
                        <button class="button" onclick="startGame('speed-match')">Nochmal spielen</button>
                        <button class="button secondary" onclick="showHomeScreen()">Zur√ºck zum Men√º</button>
                    </div>
                `;
            }
            
            showQuestion();
        }

        // ============= LEVEL CLIMB =============
        
        function startLevelClimb() {
            const allVocab = [
                ...vocabDatabase.level1,
                ...vocabDatabase.level2,
                ...vocabDatabase.level3,
                ...vocabDatabase.level4,
                ...vocabDatabase.level5
            ];
            
            const selectedWords = allVocab.sort(() => 0.5 - Math.random()).slice(0, 8);
            let currentQuestion = 0;
            let score = 0;
            
            function showQuestion() {
                if (currentQuestion >= selectedWords.length) {
                    endGame();
                    return;
                }
                
                const word = selectedWords[currentQuestion];
                
                const content = document.getElementById('mainContent');
                content.innerHTML = `
                    <div class="quiz-container">
                        <div class="quiz-header">
                            <div class="quiz-progress">Frage ${currentQuestion + 1} von ${selectedWords.length}</div>
                            <div class="quiz-score">Punkte: ${score}</div>
                        </div>
                        
                        <div class="question-card">
                            <div class="question-text">${word.word}</div>
                            <div class="question-hint">${word.translation}</div>
                            <div style="margin-top: 15px; font-size: 1.1em;">Welcher Stufe geh√∂rt dieses Wort an?</div>
                        </div>
                        
                        <div class="options-grid">
                            <div class="option-card" onclick="checkLevelAnswer(1, ${word.level})">
                                <div class="option-text">Stufe 1</div>
                                <div class="option-translation">Grundstufe (allt√§glich)</div>
                            </div>
                            <div class="option-card" onclick="checkLevelAnswer(2, ${word.level})">
                                <div class="option-text">Stufe 2</div>
                                <div class="option-translation">Aufbaustufe (gehoben)</div>
                            </div>
                            <div class="option-card" onclick="checkLevelAnswer(3, ${word.level})">
                                <div class="option-text">Stufe 3</div>
                                <div class="option-translation">Gehobene Ausdrucksweise</div>
                            </div>
                            <div class="option-card" onclick="checkLevelAnswer(4, ${word.level})">
                                <div class="option-text">Stufe 4</div>
                                <div class="option-translation">Formelle Sprache</div>
                            </div>
                            <div class="option-card" onclick="checkLevelAnswer(5, ${word.level})">
                                <div class="option-text">Stufe 5</div>
                                <div class="option-translation">A-Level Essayregister</div>
                            </div>
                        </div>
                        
                        <div id="feedbackArea"></div>
                    </div>
                `;
            }
            
            window.checkLevelAnswer = function(selected, correct) {
                const options = document.querySelectorAll('.option-card');
                options.forEach(opt => opt.classList.add('disabled'));
                
                const isCorrect = selected === correct;
                options[selected - 1].classList.add(isCorrect ? 'correct' : 'incorrect');
                if (!isCorrect) {
                    options[correct - 1].classList.add('correct');
                }
                
                if (isCorrect) {
                    score += 20 + (gameState.combo * 3);
                    incrementCombo();
                    updateAccuracy(true);
                    
                    document.getElementById('feedbackArea').innerHTML = `
                        <div class="feedback-panel correct">
                            <div class="feedback-title">‚úÖ Perfekt! +${20 + ((gameState.combo - 1) * 3)} Punkte</div>
                            <div class="feedback-explanation">Register: ${selectedWords[currentQuestion].register}</div>
                        </div>
                    `;
                } else {
                    resetCombo();
                    updateAccuracy(false);
                    
                    document.getElementById('feedbackArea').innerHTML = `
                        <div class="feedback-panel incorrect">
                            <div class="feedback-title">‚ùå Nicht ganz!</div>
                            <div class="feedback-explanation">
                                Dieses Wort geh√∂rt zu Stufe ${correct} (${selectedWords[currentQuestion].register}).
                                <br><br>Beispiel: "${selectedWords[currentQuestion].example}"
                            </div>
                        </div>
                    `;
                }
                
                setTimeout(() => {
                    currentQuestion++;
                    showQuestion();
                }, 2500);
            };
            
            function endGame() {
                addPoints(score);
                gameState.completedGames++;
                saveState();
                
                const content = document.getElementById('mainContent');
                content.innerHTML = `
                    <div class="results-screen">
                        <div class="results-icon">${score > 140 ? 'üéì' : score > 80 ? 'üìö' : 'üìñ'}</div>
                        <div class="results-title">Stufen gemeistert!</div>
                        <div class="results-score">${score} Punkte</div>
                        
                        <div class="results-stats">
                            <div class="result-stat-card">
                                <div class="result-stat-value">${Math.round((score / 160) * 100)}%</div>
                                <div class="result-stat-label">Erkennungsrate</div>
                            </div>
                        </div>
                        
                        <div class="tips-panel">
                            <div class="tips-title">üí° Tipp f√ºr A-Level Essays</div>
                            <div class="tip-item">
                                Register-Bewusstsein ist entscheidend! Vermeide allt√§gliche Sprache in akademischen Analysen. 
                                Stufe 3+ Vokabular zeigt linguistic maturity und bringt h√∂here Bewertungen.
                            </div>
                        </div>
                        
                        <button class="button" onclick="startGame('level-climb')">Nochmal √ºben</button>
                        <button class="button secondary" onclick="showHomeScreen()">Hauptmen√º</button>
                    </div>
                `;
            }
            
            showQuestion();
        }

        // ============= VOCAB BUILDER =============
        
        function startVocabBuilder() {
            let selectedVocab = [];
            const allVocab = [
                ...vocabDatabase.level1,
                ...vocabDatabase.level2,
                ...vocabDatabase.level3,
                ...vocabDatabase.level4,
                ...vocabDatabase.level5
            ];
            
            function renderBuilder() {
                const content = document.getElementById('mainContent');
                content.innerHTML = `
                    <h2 style="margin-bottom: 20px; color: #667eea;">üèóÔ∏è Vokabel-Baukasten</h2>
                    <p style="margin-bottom: 30px; color: #718096; font-size: 1.1em;">
                        W√§hle 15-20 W√∂rter aus, die du in deinem n√§chsten Essay verwenden m√∂chtest. 
                        Baue dein pers√∂nliches Arsenal f√ºr Top-Noten!
                    </p>
                    
                    <div class="selected-words-panel">
                        <div class="selected-words-title">
                            Deine Auswahl (${selectedVocab.length}/20)
                        </div>
                        <div>
                            ${selectedVocab.map(v => `
                                <span class="selected-word-chip">${v.word}</span>
                            `).join('') || '<p style="color: #718096; font-style: italic;">Noch keine W√∂rter ausgew√§hlt...</p>'}
                        </div>
                        ${selectedVocab.length >= 15 ? `
                            <button class="button success" onclick="finishVocabBuilder()" style="margin-top: 20px;">
                                ‚úì Auswahl best√§tigen und lernen!
                            </button>
                            <button class="button secondary" onclick="selectedVocab = []; renderBuilder();">
                                Auswahl zur√ºcksetzen
                            </button>
                        ` : ''}
                    </div>
                    
                    <div class="vocab-builder">
                        <h3 style="margin: 30px 0 20px 0; color: #667eea;">W√§hle aus allen Stufen:</h3>
                        
                        ${[1, 2, 3, 4, 5].map(level => `
                            <h4 style="margin: 25px 0 15px 0; color: #667eea;">
                                Stufe ${level} - ${level === 1 ? 'Grundstufe' : level === 2 ? 'Aufbaustufe' : level === 3 ? 'Gehobene Ausdrucksweise' : level === 4 ? 'Formelle Sprache' : 'A-Level Essayregister'}
                            </h4>
                            ${vocabDatabase['level' + level].map((vocab, idx) => `
                                <div class="word-card-interactive ${selectedVocab.includes(vocab) ? 'selected' : ''}" 
                                     onclick="toggleVocab(${level}, ${idx})">
                                    <div class="word-header">
                                        <div class="word-german">${vocab.word}</div>
                                        <div class="word-level level-${level}">Lvl ${level}</div>
                                    </div>
                                    <div class="word-english">${vocab.translation}</div>
                                    <div class="word-example">"${vocab.example}"</div>
                                </div>
                            `).join('')}
                        `).join('')}
                    </div>
                `;
            }
            
            window.toggleVocab = function(level, index) {
                const vocab = vocabDatabase['level' + level][index];
                const idx = selectedVocab.findIndex(v => v.word === vocab.word);
                
                if (idx > -1) {
                    selectedVocab.splice(idx, 1);
                } else {
                    if (selectedVocab.length < 20) {
                        selectedVocab.push(vocab);
                    } else {
                        alert('Du hast bereits 20 W√∂rter ausgew√§hlt! Entferne erst andere W√∂rter.');
                        return;
                    }
                }
                
                renderBuilder();
            };
            
            window.selectedVocab = selectedVocab;
            window.renderBuilder = renderBuilder;
            
            window.finishVocabBuilder = function() {
                gameState.personalVocab = selectedVocab;
                gameState.masteredWords += selectedVocab.length;
                addPoints(selectedVocab.length * 5);
                saveState();
                
                const content = document.getElementById('mainContent');
                content.innerHTML = `
                    <div class="results-screen">
                        <div class="results-icon">‚úÖ</div>
                        <div class="results-title">Vokabular gespeichert!</div>
                        <div style="font-size: 1.2em; margin: 20px 0; color: #718096;">
                            Du hast ${selectedVocab.length} W√∂rter ausgew√§hlt
                        </div>
                        
                        <div class="tips-panel">
                            <div class="tips-title">üìù N√§chste Schritte</div>
                            <div class="tip-item">
                                <strong>1. Karteikarten erstellen:</strong> Schreibe diese W√∂rter auf Karteikarten
                            </div>
                            <div class="tip-item">
                                <strong>2. T√§glich wiederholen:</strong> Gehe die Karten jeden Tag durch
                            </div>
                            <div class="tip-item">
                                <strong>3. In Essays einbauen:</strong> Verwende mindestens 10 dieser W√∂rter in deinem n√§chsten Aufsatz
                            </div>
                            <div class="tip-item">
                                <strong>4. Kontextuell √ºben:</strong> Schreibe eigene Beispiels√§tze f√ºr jedes Wort
                            </div>
                        </div>
                        
                        <div style="background: white; padding: 20px; border-radius: 15px; margin: 20px 0; text-align: left;">
                            <h3 style="color: #667eea; margin-bottom: 15px;">Deine ausgew√§hlten W√∂rter:</h3>
                            ${selectedVocab.map(v => `
                                <div style="margin-bottom: 10px; padding: 10px; background: #f7fafc; border-radius: 8px;">
                                    <strong>${v.word}</strong> - ${v.translation}
                                    <div style="font-style: italic; color: #718096; font-size: 0.9em;">${v.example}</div>
                                </div>
                            `).join('')}
                        </div>
                        
                        <button class="button" onclick="startVocabBuilder()">Neue Auswahl treffen</button>
                        <button class="button secondary" onclick="showHomeScreen()">Zur√ºck zum Men√º</button>
                    </div>
                `;
            };
            
            renderBuilder();
        }

        // Placeholder functions for other modes
        function startTranslationSprint() {
            alert('√úbersetzungs-Sprint wird noch entwickelt! üöß Kommt bald!');
            showHomeScreen();
        }
        
        function startContextMaster() {
            alert('Kontext-Meister wird noch entwickelt! üöß Kommt bald!');
            showHomeScreen();
        }
        
        function startSynonymChains() {
            alert('Synonym-Ketten wird noch entwickelt! üöß Kommt bald!');
            showHomeScreen();
        }
        
        function startEssayPrep() {
            alert('Essay-Vorbereitung wird noch entwickelt! üöß Kommt bald!');
            showHomeScreen();
        }
        
        function startRegisterRecognition() {
            alert('Register-Erkennung wird noch entwickelt! üöß Kommt bald!');
            showHomeScreen();
        }

        // Start the application
        init();
    </script>
</body>
</html>
